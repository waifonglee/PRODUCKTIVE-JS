<!doctype html>
<html>

<head>
	<link rel="stylesheet" type="text/css" href="gamestyle.css">
	<link rel="shortcut icon" href="#" />
</head>

<body>
	<div id = containcanvas>
  		<button id='shopButton'> Shop </button>
		<canvas id="bg"> </canvas>
		<canvas id="fg"> </canvas>
		<div id="shop">
			<img id = "bgimg" src="princess.png"> 
		</div>
		<div id = "buttonsContain"> </div>
	</div>

	<script src = "sprite.js" type = "text/javascript"></script>
	<script src = "shop.js" type = "text/javascript"></script>

	<script>
	var background = document.getElementById("bg");
	background.width = 1408;
	background.height = 832;
	var cxt_bg = background.getContext('2d');
	var foreground = document.getElementById("fg");
	foreground.width = 1408;
	foreground.height = 832;
	var cxt_fg = foreground.getContext('2d');
	var button_contain = document.getElementById('buttonsContain');
	button_contain.style.zIndex = "-6";
	var shop_contain = document.getElementById('shop');
	shop_contain.style.zIndex = "-5";

	var spriteImage = new Image();
	spriteImage.src = "princess.png";
	
	spriteImage.onload = function() {
		load_game();
	}


	function load_game() {
		load_map();
		var shop = new Shop();
		shop.loadItems();
		var girl = new Sprite(spriteImage, [17,18,19,20,21,22,23,24], [64, 64], [0, 0]);
		girl.getChar();


		document.getElementById('shopButton').onclick = function() {
        		button_contain.style.zIndex = "" + -1 * parseInt(button_contain.style.zIndex);
        		shop_contain.style.zIndex = "" + -1 * parseInt(shop_contain.style.zIndex);
        	};

        var item_buttons = document.querySelectorAll(".itemButtons");
        for (var i = 0; i < item_buttons.length; i++) {
        	item_buttons[i].addEventListener('click', function(event) {
        		const elem = event.target;
        		const id = elem.id;
        		shop.animateItem(id);
        		this.disabled = true;

        	});
        }
    }

	function load_map() {
            var i = new Image;
            i.onload = function() {
                cxt_bg.drawImage(i, 0, 0,1408,832,500,0,1408,832);
            };
            i.src = 'ducky.png';
       
        }
</script>
</body>
</html>
